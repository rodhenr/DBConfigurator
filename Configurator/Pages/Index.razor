@using Configurator.Interfaces
@inject ITableService tableService

@page "/"

<PageTitle>Index</PageTitle>

<PackageSelection HandleClick="@GetTableData"/>
<TableData TableHeaders="_tableHeaders" TableDataValues="_tableData"/>

@code {
    private List<string> _tableHeaders = new();
    private Dictionary<int, List<string>> _tableData = new();

    private async Task GetTableData()
    {
        _tableHeaders.Clear();
        _tableData.Clear();
        
        var result = await tableService.GetTableColumns("PackageGroups");
        _tableHeaders.AddRange(result.ToList());

        var resultData = await tableService.GetTableData("PackageGroups", result);
        _tableData = resultData;
    }

}